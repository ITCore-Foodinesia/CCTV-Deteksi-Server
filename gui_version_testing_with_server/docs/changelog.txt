================================================================================
CHANGELOG - CCTV Detection System
================================================================================

================================================================================
[2026-01-13 16:42 WITA] - Bug Fix: Sheets Data Display
================================================================================

Summary:
  Dashboard was displaying total sum values (loading_count/rehab_count) instead 
  of last row values (latest_loading/latest_rehab) from Google Sheets.

Root Cause:
  - WebSocket stats_update and REST API /api/stats were using loading_count (28)
    instead of latest_loading (78)
  - This caused Dashboard to show incorrect values: 28/20 instead of 78/50

Files Changed:
  
  [Backend - Unified Server]
  - gui_version_testing_with_server/src/unified_server/api/websocket.py
    * Line 85-86: Changed sheets_data.get('loading_count') to sheets_data.get('latest_loading')
    * Line 161-162: Same fix in stats broadcast loop
  
  - gui_version_testing_with_server/src/unified_server/api/routes.py
    * Line 111-112: Changed /api/stats endpoint to use latest_loading/latest_rehab
  
  [Backend - Legacy API Server]
  - gui_version_testing_with_server/src/api/api_server.py
    * Line 1121-1124: Fixed webhook handler to use latest_loading instead of loading_count
  
  [Backend - Mock Test Server]
  - gui_version_testing_with_server/src/testing/mock_main_v3.py
    * Line 43-54: Added latest_loading and latest_rehab fields to sheets_data dict
    * Line 214-226: Updated sheets_poll_loop to parse and store latest values
  
  [Frontend - Dashboard]
  - dashboard/src/hooks/useWebSocket.js
    * Line 18-26: Added latest_loading and latest_rehab to initial sheetsData state
  
  - dashboard/src/components/WarehouseAIDashboard.jsx
    * Line 52-61: Added DEBUG logging to trace data flow (temporary for debugging)

  [Config]
  - gui_version_testing_with_server/.gitignore
    * Line 119-123: Removed config/*.json from ignore list to allow tracking

Result:
  - Dashboard now correctly displays: 78, 50, 128 (was: 28, 20, 48)
  - Data from last row of Google Sheets is now used instead of total sums

================================================================================
[2026-01-13 15:30 WITA] - Feature: Enhanced TUI Dashboard
================================================================================

Summary:
  Added professional Terminal User Interface (TUI) with progress bars and 
  resource monitoring.

Files Changed:
  - gui_version_testing_with_server/src/utils/tui.py
    * Created EnhancedServerTUI class with Rich library
    * Added CPU/Memory monitoring via psutil
    * Progress bars for FPS and buffer usage
  
  - gui_version_testing_with_server/src/unified_server/main.py
    * Updated to use EnhancedServerTUI
    * Added _get_tui_stats() for comprehensive stats format
  
  - gui_version_testing_with_server/src/testing/mock_main_v3.py
    * Updated get_tui_stats() for enhanced TUI format
  
  - gui_version_testing_with_server/scripts/start_test_stream.bat
    * Added --tui flag support
    * Added --sheets flag for Google Sheets integration testing

================================================================================
[2026-01-13 14:00 WITA] - Feature: HTTP Relay Mode
================================================================================

Summary:
  Created Unified Server architecture with relay mode to consume Main V3 stream.

Files Changed:
  - gui_version_testing_with_server/src/unified_server/capture/http_relay.py
    * Created HTTPStreamRelay class for relaying MJPEG streams
  
  - gui_version_testing_with_server/src/unified_server/config.py
    * Added CaptureConfig with mode: 'relay' | 'direct'
    * Added relay_url and relay_stats_url settings
  
  - gui_version_testing_with_server/src/unified_server/main.py
    * Added support for relay mode
    * Integration with Main V3 on port 5002

================================================================================
